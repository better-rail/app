# This `.xcode.env` file is versioned and is used to source the environment
# used when running script phases inside Xcode.
# To customize your local environment, you can create an `.xcode.env.local`
# file that is not versioned.
# NODE_BINARY variable contains the PATH to the node executable.
#
# Customize the NODE_BINARY variable here.
# For example, to use nvm with brew, add the following line
# . "$(brew --prefix nvm)/nvm.sh" --no-use

# Try to load nvm if it exists, otherwise fall back to system node
if [ -d "$HOME/.nvm" ]; then
  export NVM_DIR="$HOME/.nvm"
  [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
fi

# Set NODE_BINARY, trying various common locations
if command -v node >/dev/null 2>&1; then
  export NODE_BINARY=$(command -v node)
elif [ -x "/usr/local/bin/node" ]; then
  export NODE_BINARY="/usr/local/bin/node"
elif [ -x "/opt/homebrew/bin/node" ]; then
  export NODE_BINARY="/opt/homebrew/bin/node"
else
  echo "Warning: Node.js not found. Please install Node.js or check your PATH."
  export NODE_BINARY="node"
fi
