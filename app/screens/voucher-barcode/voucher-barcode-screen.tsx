import React, { useEffect } from "react"
import { observer } from "mobx-react-lite"
import { Image, DynamicColorIOS, Dimensions, ImageStyle, ViewStyle, TextStyle } from "react-native"
import { Screen, Text, Button } from "../../components"
import { VoucherBarcodeScreenProps } from "../../navigators/create-voucher-navigator"
import { color, spacing } from "../../theme"

const { width: deviceWidth } = Dimensions.get("screen")

const ROOT: ViewStyle = {
  backgroundColor: Platform.select({
    ios: DynamicColorIOS({ light: color.background, dark: color.secondaryBackground }),
    android: color.dim,
  }),
  paddingTop: spacing[4],
  paddingHorizontal: spacing[3],
  flex: 1,
}

const SUCCESS_TEXT: TextStyle = {
  marginBottom: spacing[3],
  textAlign: "center",
}

const BARCODE_IMAGE: ImageStyle = {
  alignSelf: "center",
  backgroundColor: "#fff",
  width: deviceWidth - 80,
  height: deviceWidth - 80,
  resizeMode: "contain",
  borderWidth: 1,
  borderColor: color.dim,
}

const INFO_TEXT: TextStyle = {
  maxWidth: 290,
  alignSelf: "center",
  marginVertical: spacing[4],
  textAlign: "center",
  opacity: 0.9,
}

const CLOSE_BUTTON: ViewStyle = {
  width: deviceWidth - 75,
  alignSelf: "center",
}

var base64Icon =
  "data:image/png;base64,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"

export const VoucherBarcodeScreen = observer(function VoucherBarcodeScreen({ navigation }: VoucherBarcodeScreenProps) {
  // Pull in one of our MST stores
  // const { someStore, anotherStore } = useStores()

  return (
    <Screen style={ROOT} preset="scroll" unsafe={true} statusBar="light-content">
      <Text preset="header" style={SUCCESS_TEXT}>
        השובר מוכן!
      </Text>

      <Image style={BARCODE_IMAGE} source={{ uri: base64Icon }} />
      <Text style={INFO_TEXT}>ניתן לגשת לשובר גם דרך המסך הראשי </Text>
      <Button title="סגירה" style={CLOSE_BUTTON} onPress={() => navigation.dangerouslyGetParent().goBack()} />
    </Screen>
  )
})
